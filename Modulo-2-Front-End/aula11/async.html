<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise, Fetch e Async/Await</title>
    <style>
        body {
            font-family: sans-serif;
            padding: 2rem;
        }

        h1,
        h2 {
            color: #333;
        }

        code {
            background-color: #eee;
            padding: 2px 4px;
            border-radius: 4px;
        }
    </style>
</head>

<body>
    <h1>Exemplos de Promise, Fetch e Async/Await</h1>
    <p>Abra o console do desenvolvedor (F12) para ver os resultados dos exemplos.</p>

    <script>
        console.log("--- Exemplo 1: Promise ---");

        // 1. Criando a Promise
        const minhaPromessa = new Promise((resolve, reject) => {
            console.log("Iniciando a operação assíncrona (Promise)...");
            setTimeout(() => {
                const sucesso = true; // Mude para 'false' para simular um erro
                if (sucesso) {
                    resolve("Dados recebidos com sucesso!");
                } else {
                    reject("Ocorreu um erro ao buscar os dados.");
                }
            }, 2000); // Simula uma espera de 2 segundos
        });

        // 2. Consumindo a Promise
        minhaPromessa
            .then((resultadoSucesso) => {
                console.log("Sucesso (Promise):", resultadoSucesso);
            })
            .catch((resultadoErro) => {
                console.error("Erro (Promise):", resultadoErro);
            });

        console.log("---------------------------------");
        console.log("--- Exemplo 2: Fetch com .then() ---");

        fetch('https://jsonplaceholder.typicode.com/todos/1')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Erro na rede: ' + response.statusText);
                }
                return response.json();
            })
            .then(data => {
                console.log("Dados recebidos (Fetch com .then):", data);
            })
            .catch(error => {
                console.error("Falha na requisição (Fetch com .then):", error);
            });

        console.log("---------------------------------");
        console.log("--- Exemplo 3: Fetch com async/await ---");

        async function buscarDadosComAsyncAwait() {
            try {
                const response = await fetch('https://jsonplaceholder.typicode.com/todos/2'); // Buscando outro ID para diferenciar
                if (!response.ok) throw new Error('Erro na rede: ' + response.statusText);
                const data = await response.json();
                console.log("Dados recebidos (Fetch com async/await):", data);
            } catch (error) {
                console.error("Falha na requisição (Fetch com async/await):", error);
            }
        }
        buscarDadosComAsyncAwait();
    </script>
</body>

</html>